<!DOCTYPE HTML>
<html>
<head>
    <title>User Management Page</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script>
		$(document).ready(function() {
			$.get("http://localhost:8080/user", function(data, status){
				var row = '';
				$.each(data, function (i, item) {
					row += '<tr><td>' + data[i]['id'] + '</td>';
					row += '<td>' + data[i]['username'] + '</td>';
					row += '<td>' + data[i]['password'] + '</td>';
					row += '<td>' + data[i]['enabled'] + '</td>';
					row += '<td>' + data[i]['role'] + '</td>';
					row += '<td>' + data[i]['firstName'] + '</td>';
					row += '<td>' + data[i]['lastName'] + '</td></tr>';
				});
				$('#userData').append(row);
			});
			$('.message').hide();
			$("#disable").click(function() {
				var usermodel = {
					username : document.getElementById('disableUsername').value
				};
				var requestJSON = JSON.stringify(usermodel);
				$.ajax({
					type : "POST",
					url : "http://localhost:8080/user/disable",
					headers : {
						"Content-Type" : "application/json"
					},
					data : requestJSON,
					success : function(data) {
						$("#resultDisableSuccess").show();
						$("#resultDisableError").hide();
						console.log(data);
					},
					error : function(data) {
						$("#resultDisableError").show();
						$("#resultDisableSuccess").hide();
						console.log(data);
					}
				});
			});
			$("#enable").click(function() {
				var usermodel = {
					username : document.getElementById('enableUsername').value
				};
				var requestJSON = JSON.stringify(usermodel);
				$.ajax({
					type : "POST",
					url : "http://localhost:8080/user/enable",
					headers : {
						"Content-Type" : "application/json"
					},
					data : requestJSON,
					success : function(data) {
						$("#resultEnableSuccess").show();
						$("#resultEnableError").hide();
						console.log(data);
					},
					error : function(data) {
						$("#resultEnableError").show();
						$("#resultEnableSuccess").hide();
						console.log(data);
					}
				});
			});
			$("#changePassword").click(function() {
				var usermodel = {
					username : document.getElementById('passwordUsername').value,
					password : document.getElementById('passwordPassword').value
				};
				var requestJSON = JSON.stringify(usermodel);
				$.ajax({
					type : "POST",
					url : "http://localhost:8080/user/changePassword",
					headers : {
						"Content-Type" : "application/json"
					},
					data : requestJSON,
					success : function(data) {
						$("#resultPasswordSuccess").show();
						$("#resultPasswordError").hide();
						console.log(data);
					},
					error : function(data) {
						$("#resultPasswordError").show();
						$("#resultPasswordSuccess").hide();
						console.log(data);
					}
				});
			});
			$("#changeFirstName").click(function() {
				var usermodel = {
					username : document.getElementById('firstnameUsername').value,
					firstName : document.getElementById('firstName').value
				};
				var requestJSON = JSON.stringify(usermodel);
				$.ajax({
					type : "POST",
					url : "http://localhost:8080/user/changeFirstName",
					headers : {
						"Content-Type" : "application/json"
					},
					data : requestJSON,
					success : function(data) {
						$("#resultFirstNameSuccess").show();
						$("#resultFirstNameError").hide();
						console.log(data);
					},
					error : function(data) {
						$("#resultFirstNameError").show();
						$("#resultFirstNameSuccess").hide();
						console.log(data);
					}
				});
			});
			$("#changeLastName").click(function() {
				var usermodel = {
					username : document.getElementById('lastnameUsername').value,
					lastName : document.getElementById('lastName').value
				};
				var requestJSON = JSON.stringify(usermodel);
				$.ajax({
					type : "POST",
					url : "http://localhost:8080/user/changeLastName",
					headers : {
						"Content-Type" : "application/json"
					},
					data : requestJSON,
					success : function(data) {
						$("#resultLastNameSuccess").show();
						$("#resultLastNameError").hide();
						console.log(data);
					},
					error : function(data) {
						$("#resultLastNameError").show();
						$("#resultLastNameSuccess").hide();
						console.log(data);
					}
				});
			});
			$("#changeRole").click(function() {
				var authmodel = {
					username : document.getElementById('roleUsername').value,
					role : document.getElementById('role').value
				};
				var requestJSON = JSON.stringify(authmodel);
				$.ajax({
					type : "POST",
					url : "http://localhost:8080/user/changeRole",
					headers : {
						"Content-Type" : "application/json"
					},
					data : requestJSON,
					success : function(data) {
						$("#resultRoleSuccess").show();
						$("#resultRoleError").hide();
						console.log(data);
					},
					error : function(data) {
						$("#resultRoleError").show();
						$("#resultRoleSuccess").hide();
						console.log(data);
					}
				});
			});
		});
	 </script>
</head>
<body>

<div>User Administration Page</div>


<p>Disable an account:</p>
<table>
	<tr>
		<td>Username:</td>
		<td><input type='text' id='disableUsername' required/></td>
	</tr>
	<tr>
		<td><button id="disable">Disable</button></td>
	</tr>
</table>

<p class="message" id='resultDisableSuccess'>User disabled successfully!</p>
<p class="message" id='resultDisableError'>Error disabling user.</p>

<br><br>

<p>Enable an account:</p>
<table>
	<tr>
		<td>Username:</td>
		<td><input type='text' id='enableUsername' required/></td>
	</tr>
	<tr>
		<td><button id="enable">Enable</button></td>
	</tr>
</table>

<p class="message" id='resultEnableSuccess'>User enabled successfully!</p>
<p class="message" id='resultEnableError'>Error enabling user.</p>

<br><br>

<p>Change a user's password:</p>
<table>
	<tr>
		<td>Username:</td>
		<td><input type='text' id='passwordUsername' required/></td>
	</tr>
	<tr>
		<td>New Password:</td>
		<td><input type='text' id='passwordPassword' required/></td>
	</tr>
	<tr>
		<td><button id="changePassword">Change Password</button></td>
	</tr>
</table>

<p class="message" id='resultPasswordSuccess'>Password changed successfully!</p>
<p class="message" id='resultPasswordError'>Error changing password.</p>

<br><br>

<p>Change a user's first name:</p>
<table>
	<tr>
		<td>Username:</td>
		<td><input type='text' id='firstnameUsername' required/></td>
	</tr>
	<tr>
		<td>New First Name:</td>
		<td><input type='text' id='firstName' required/></td>
	</tr>
	<tr>
		<td><button id="changeFirstName">Change First Name</button></td>
	</tr>
</table>

<p class="message" id='resultFirstNameSuccess'>First name changed successfully!</p>
<p class="message" id='resultFirstNameError'>Error changing first name.</p>

<br><br>

<p>Change a user's last name:</p>
<table>
	<tr>
		<td>Username:</td>
		<td><input type='text' id='lastnameUsername' required/></td>
	</tr>
	<tr>
		<td>New Last Name:</td>
		<td><input type='text' id='lastName' required/></td>
	</tr>
	<tr>
		<td><button id="changeLastName">Change Last Name</button></td>
	</tr>
</table>

<p class="message" id='resultLastNameSuccess'>Last name changed successfully!</p>
<p class="message" id='resultLastNameError'>Error changing last name.</p>


<p>Change a user's role:</p>
<table>
	<tr>
		<td>Username:</td>
		<td><input type='text' id='roleUsername' required/></td>
	</tr>
	<tr>
		<td>New Role:
		<select id="role" required>
			<option value="ROLE_USER">USER</option>
			<option value="ROLE_ADMIN">ADMIN</option>
		</select>
		</td>
	</tr>
	<tr>
		<td><button id="changeRole">Change Role</button></td>
	</tr>
</table>

<p class="message" id='resultRoleSuccess'>Role changed successfully!</p>
<p class="message" id='resultRoleError'>Error changing role.</p>

User information:
<table id="userData">
	<tr>
		<td>ID</td>
		<td>Username</td>
		<td>Password</td>
		<td>Enabled</td>
		<td>Role</td>
		<td>First Name</td>
		<td>Last Name</td>
	</tr>
</table>

</body>
</html>